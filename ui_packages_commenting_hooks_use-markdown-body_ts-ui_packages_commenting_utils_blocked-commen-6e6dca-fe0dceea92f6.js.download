"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_commenting_hooks_use-markdown-body_ts-ui_packages_commenting_utils_blocked-commen-6e6dca"],{66965:(e,i,t)=>{t.d(i,{x:()=>x});var r=t(85074),s=t(1093),n=t(73627),a=t(6664),o=t(31329),l=t(96540),d=t(53935);let c={focusCommentComposer:"r"};var u=t(82667),h=t(79828);function x({commentBoxRef:e,markdownComposerRef:i,onChange:t,onCancel:x,referenceId:m,hasSingleKeyShortcutEnabled:f,insidePortal:g}){let[p,y]=(0,o.F)(u.t.localStorageKeys.issueNewComment("viewer",m),""),[j,b]=(0,l.useState)(p),v=(0,l.useMemo)(()=>(0,r.KG)(j),[j]),A=(0,n.X)(),k=void 0!==f?f:A?.current_user_settings?.use_single_key_shortcut||!1,{anyItemPickerOpen:S}=(0,s.t)(),C=(0,l.useCallback)(e=>{b(e),y(e)},[y]),w=(0,l.useCallback)(e=>{C(e),t(),""===e&&x()},[C,x,t]);(0,l.useImperativeHandle)(i,()=>({appendText:e=>{w(`${j}

${e}`)},setText:e=>{w(e)},focus:()=>{e.current?.focus()}}),[w,j,e]),(0,l.useEffect)(()=>b(j),[j,b]);let _=(0,l.useCallback)(i=>{if(!(!k||S())&&e&&e.current){i.preventDefault();let t=window.getSelection();if(t&&t.anchorNode){let e={anchorNode:t.anchorNode,range:t.getRangeAt(0)},i=t.anchorNode.parentElement,r=i?.closest(d.Sp(d.mU.issueComment))??i?.closest(d.Sp(d.mU.issueBody));if(r&&r instanceof HTMLDivElement){let i=(0,h.E)(r,e);C(`${i}`)}}e.current.scrollIntoView(),e.current.focus()}},[S,C,e,k]),N=(0,l.useCallback)(()=>{e.current?e.current.reset():b(""),y(void 0)},[e,y]);return(0,a._N)([c.focusCommentComposer],_,{triggerWhenInputElementHasFocus:!1,triggerWhenPortalIsActive:g}),{handleMarkdownBodyChanged:w,markdownValidationResult:v,markdownBody:j,resetMarkdownBody:N}}},14642:(e,i,t)=>{t.d(i,{i:()=>s});var r=t(69730);function s(e,i,t=null){return e?r.k.repoArchived:i?r.k.issueLockedToCollaborators:t||r.k.canNotCommentOnIssue}},60188:(e,i,t)=>{t.d(i,{D:()=>n});var r=t(7572),s=t(97156);function n(e){if(!s.XC)return;let i=s.XC.querySelector("title"),t=s.XC.createElement("title");t.textContent=e,i?i.textContent!==e&&(i.replaceWith(t),(0,r.i)(e)):(s.XC.head.appendChild(t),(0,r.i)(e))}},13894:(e,i,t)=>{t.d(i,{h:()=>v});var r=t(74848),s=t(47139),n=t(94977),a=t(34614),o=t(75177),l=t(91246),d=t(30729),c=t(52464),u=t(14740);function h({reason:e,isViewer:i,hasSignature:t,verificationStatus:s,signatureType:n,signedByGitHub:o,keyExpired:l,keyRevoked:d}){let h=l?(0,r.jsxs)("span",{children:[" The key has expired",d&&(0,r.jsx)("span",{children:" and has been revoked"}),"."]}):d?(0,r.jsx)("span",{children:" The key has been revoked."}):(0,r.jsx)(r.Fragment,{});if("unverified"===s){if(t&&"GPGVERIFY_UNAVAILABLE"===e)return(0,r.jsx)("span",{children:"The commit signature verification service is not available"});if(!t)return(0,r.jsx)("span",{children:"This commit is not signed, but one or more authors requires that any commit attributed to them is signed."});switch(e){case"INVALID":return(0,r.jsx)("span",{children:"The signature in this commit could not be verified. Someone may be trying to trick you."});case"MALFORMED_SIG":return(0,r.jsx)("span",{children:"We were unable to parse the signature in this commit."});case"UNKNOWN_KEY":if(i)return(0,r.jsxs)("span",{children:[(0,r.jsxs)(a.A,{inline:!0,href:"/settings/keys",children:["Upload your public signing ","SshSignature"===n?"SSH":"GPG"," key"]})," ","to verify your signature."]});return(0,r.jsx)("span",{children:"This user has not yet uploaded their public signing key."});case"BAD_EMAIL":return(0,r.jsx)("span",{children:"The email in this signature doesn\u2019t match the committer email."});case"UNVERIFIED_EMAIL":if(i)return(0,r.jsxs)("span",{children:[(0,r.jsx)(a.A,{inline:!0,href:"/settings/emails",children:"Verify your email address"})," ","to verify your signature."]});return(0,r.jsx)("span",{children:"The committer email address is not verified."});case"NO_USER":return(0,r.jsx)("span",{children:"No user is associated with the committer email."});case"UNKNOWN_SIG_TYPE":return(0,r.jsx)("span",{children:"GitHub supports GPG and S/MIME signatures. We don't know what type of signature this is."});case"GPGVERIFY_ERROR":return(0,r.jsx)("span",{children:"We had a problem verifying this signature. Please try again later."});case"NOT_SIGNING_KEY":return(0,r.jsx)("span",{children:"The key that signed this doesn't have usage flags that allow signing."});case"EXPIRED_KEY":return(0,r.jsx)("span",{children:"The key that signed this is expired."});case"OCSP_ERROR":return(0,r.jsx)("span",{children:"We had a problem checking for revoked certificates. Please try again later."});case"OCSP_REVOKED":return(0,r.jsx)("span",{children:"One or more certificates in the chain has been revoked."});case"BAD_CERT":return(0,r.jsx)("span",{children:"The signing certificate or its chain could not be verified."});default:return(0,r.jsx)("span",{children:"We were unable to verify this signature."})}}else if("partially_verified"===s)return o?(0,u.k)()?(0,r.jsxs)("span",{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]}):(0,r.jsxs)("span",{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]}):(0,r.jsxs)("span",{children:["This commit was signed with the committer's ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]});else if("verified"===s)switch(e){case"VALID":if(!o)return(0,r.jsxs)("span",{children:["This commit was signed with the committer's ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]});if((0,u.k)())return(0,r.jsxs)("span",{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]});return(0,r.jsxs)("span",{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,r.jsx)(c.A,{sx:{fontWeight:"bold"},children:"verified signature"}),".",h]});case"OCSP_PENDING":return(0,r.jsx)("span",{children:"This commit was signed with a verified signature, though we're still working on certificate revocation checking."})}return(0,r.jsx)("span",{})}try{h.displayName||(h.displayName="ReasonLabel")}catch{}function x({icon:e,iconColor:i,id:t,reason:s,isViewer:n,hasSignature:a,verificationStatus:l,signatureType:c,signedByGitHub:u,keyExpired:x,keyRevoked:m}){return(0,r.jsxs)(o.A,{id:t,sx:{display:"flex",p:2},"data-testid":"signed-commit-header",children:[(0,r.jsx)(o.A,{sx:{pr:2},children:(0,r.jsx)(d.A,{icon:e,sx:{color:i}})}),(0,r.jsx)(o.A,{sx:{fontSize:1,flexGrow:1},children:(0,r.jsx)(h,{reason:s,isViewer:n,hasSignature:a,verificationStatus:l,signatureType:c,signedByGitHub:u,keyExpired:x,keyRevoked:m})})]})}try{x.displayName||(x.displayName="SignedCommitHeader")}catch{}var m=t(38621),f=t(89169),g=t(22868);function p({keyHex:e,signatureType:i,signer:t,verifiedAt:n,showPartiallyVerifiedMessage:l,signingLinkComponent:u,keyExpired:h,keyRevoked:x}){return(0,r.jsx)(o.A,{sx:{display:"flex"},"data-testid":"signed-commit-footer",children:(0,r.jsx)(o.A,{sx:{fontSize:0,flexGrow:1,maxWidth:"100%"},children:l&&t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{sx:{py:3},children:(0,r.jsxs)(o.A,{sx:{display:"flex"},children:[(0,r.jsx)(g.r,{src:t.avatar_url,size:20,sx:{mr:2,ml:3}}),(0,r.jsxs)(o.A,{sx:{flex:1},children:[(0,r.jsx)(a.A,{href:`/${t.login}`,sx:{fontSize:0,color:"fg.default",fontWeight:"bold"},children:t.login}),(0,r.jsxs)("span",{children:["'s contribution has been verified via ","SshSignature"===i?"SSH":"GPG"," key."]})]})]})}),(0,r.jsxs)(o.A,{sx:{backgroundColor:"attention.subtle",display:"flex",p:3},children:[(0,r.jsx)(d.A,{icon:m.InfoIcon,sx:{mr:2}}),"We cannot verify signatures from co-authors, and some of the co-authors attributed to this commit require their commits to be signed."]})]}):(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(o.A,{sx:{px:3,pt:3},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.r,{src:t.avatar_url,size:20,sx:{mr:2}}),(0,r.jsx)(a.A,{href:`/${t.login}`,sx:{fontSize:1,color:"fg.default",fontWeight:"bold"},children:t.login})]})}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)(o.A,{sx:{p:3,flexDirection:"column"},children:[e&&(0,r.jsxs)("div",{children:["SshSignature"===i?"SSH Key Fingerprint:":"GPG Key ID:"," ",(0,r.jsx)(c.A,{sx:{color:"fg.muted"},children:e})]}),n&&(0,r.jsxs)("div",{children:["Verified"," ",(0,r.jsx)(f.A,{datetime:n,threshold:"PT0S",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e&&(h||x)&&(0,r.jsxs)(o.A,{sx:{py:1},children:[h&&(0,r.jsx)(s.A,{sx:{mr:1},variant:"accent",children:"Expired"}),x&&(0,r.jsx)(s.A,{variant:"attention",children:"Revoked"})]}),u]})]})})})}try{p.displayName||(p.displayName="SignedCommitFooter")}catch{}function y({subject:e,issuer:i,signingLinkComponent:t,verifiedAt:s}){let n,a;return e.organization&&e.organization_unit?n="O/OU":e.organization?n="O":e.organization_unit&&(n="OU"),i.organization&&i.organization_unit?a="O/OU":i.organization?a="O":i.organization_unit&&(a="OU"),(0,r.jsx)(o.A,{sx:{display:"flex"},"data-testid":"smime-commit-footer",children:(0,r.jsxs)(o.A,{sx:{fontSize:0,p:3},children:[(0,r.jsx)(c.A,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate subject"}),(0,r.jsxs)(o.A,{as:"table",sx:{mb:1},children:[e.common_name&&(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.common_name})]}),e.email_address&&(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"emailAddress"}),(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.email_address})]}),n&&(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:n}),(0,r.jsxs)("td",{children:[e.organization,"O/OU"===n&&"/",e.organization_unit]})]})]}),(0,r.jsx)(c.A,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate issuer"}),(0,r.jsxs)(o.A,{as:"table",sx:{mb:1},children:[i.common_name&&(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,r.jsx)("td",{children:i.common_name})]}),a&&(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.A,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:a}),(0,r.jsxs)("td",{children:[i.organization,"O/OU"===a&&"/",i.organization_unit]})]})]}),s&&(0,r.jsxs)("div",{children:["Verified"," ",(0,r.jsx)(f.A,{datetime:s,threshold:"PT0S",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),t]})})}try{y.displayName||(y.displayName="SmimeCommitFooter")}catch{}function j(e){var i;let t;let{ariaLabel:s,hasSignature:n,isOpen:d,onDismiss:c,signature:u,verificationStatus:h}=e,{footerLabel:f,footerUrl:g}=(i=u.helpUrl,{footerLabel:"Learn about vigilant mode",footerUrl:`${i}/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits`}),j=u.signatureVerificationReason.toUpperCase(),b=u.signedByGitHub,{icon:v,icon_color:A}="unverified"===h?{icon:m.UnverifiedIcon,icon_color:"fg.muted"}:{icon:m.VerifiedIcon,icon_color:"success.fg"};"unverified"===h||b||(t={avatar_url:u.signerAvatarUrl,login:u.signerLogin});let k=(0,r.jsx)(a.A,{href:g,"data-testid":"signature-link",className:"Link--inTextBlock",children:f});return d?(0,r.jsx)(l.l,{onClose:c,sx:{overflowY:"auto",backgroundColor:"canvas.default",boxShadow:"none"},title:h,width:"small",renderHeader:({dialogLabelId:e,dialogDescriptionId:i})=>(0,r.jsxs)(o.A,{"data-testid":"signed-commit-dialog",sx:{display:"flex",gap:2,alignItems:"flex-start",p:2,backgroundColor:"canvas.subtle",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.subtle"},children:[(0,r.jsx)(l.l.Title,{id:e,className:"sr-only",children:s??h}),(0,r.jsx)(x,{reason:j,icon:v,iconColor:A,id:i,verificationStatus:h,isViewer:u.isViewer,hasSignature:n,signatureType:u.signatureType,signedByGitHub:b,keyExpired:u.keyExpired,keyRevoked:u.keyRevoked}),(0,r.jsx)(l.l.CloseButton,{onClose:c})]}),renderBody:()=>(0,r.jsx)(l.l.Body,{sx:{padding:0},children:"GpgSignature"===u.signatureType||"SshSignature"===u.signatureType?(0,r.jsx)(p,{keyHex:u.keyId,signatureType:u.signatureType,signer:t,verifiedAt:u.verifiedAt,showPartiallyVerifiedMessage:"partially_verified"===h,signingLinkComponent:k,keyExpired:u.keyExpired,keyRevoked:u.keyRevoked}):"SmimeSignature"===u.signatureType&&u.signatureCertificateSubject&&u.signatureCertificateIssuer?(0,r.jsx)(y,{issuer:u.signatureCertificateIssuer,subject:u.signatureCertificateSubject,signingLinkComponent:k,verifiedAt:u.verifiedAt}):(0,r.jsx)(o.A,{sx:{display:"flex"},children:(0,r.jsx)(o.A,{sx:{fontSize:0,p:3},children:k})})})}):null}try{j.displayName||(j.displayName="SignedCommitDialog")}catch{}var b=t(96540);function v({hasSignature:e,verificationStatus:i,signature:t,commitOid:s,badgeSize:a="small"}){let[o,l]=(0,b.useState)(!1),d=(0,b.useRef)(null);if(!i||!t)return(0,r.jsx)(n.A,{"aria-label":"Verification status not available",direction:"n",noDelay:!0,children:(0,r.jsx)(k,{verificationStatus:"error",labelProps:{size:"small"}})});if("unsigned"===i)return(0,r.jsx)(r.Fragment,{});let c=(0,r.jsx)(k,{labelProps:{as:"button",onClick:()=>l(!0),ref:d,size:a,sx:{cursor:"pointer"}},verificationStatus:i});return(0,r.jsxs)(r.Fragment,{children:[c,o&&(0,r.jsx)(j,{isOpen:o,onDismiss:()=>{l(!1),setTimeout(()=>{d.current?.focus()},0)},verificationStatus:i,signature:t,hasSignature:e,ariaLabel:`${i.replace("_"," ")}: ${s.slice(0,7)}`})]})}let A={verified:{label:"Verified",variant:"success"},unverified:{label:"Unverified",variant:"attention"},partially_verified:{label:"Partially verified",variant:"success"},error:{label:"Verification error",variant:"secondary"}},k=(0,b.forwardRef)(({verificationStatus:e,labelProps:i},t)=>{let n=A[e];return n?(0,r.jsx)(s.A,{ref:t,variant:n.variant,...i,children:n.label}):(0,r.jsx)(r.Fragment,{})});k.displayName="VerificationLabel";try{v.displayName||(v.displayName="SignedCommitBadge")}catch{}},69014:(e,i,t)=>{t.d(i,{x:()=>x});var r,s=t(96540),n=t(73272),a=t(29235),o=t(7665),l=t(74848),d=t(10204);let c=(0,s.createContext)(null),u=null;function h(e,i){let t=d.KK.parse(e);if(!t)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new d.m0),u.add({topic:t,subscriber:i}),{unsubscribe:()=>{u?.delete({topic:t,subscriber:i})}}}try{c.displayName||(c.displayName="AliveTestContext")}catch{}try{(r=function({children:e,initialMessages:i}){return(0,s.useEffect)(()=>{let e=[];if(i)for(let[t,r]of i){let i=window.setTimeout(()=>{(function(e,i){if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let t of Array.from(u.subscribers(e)))t(i)})(t,r)},0);e.push(i)}return()=>{for(let i of(u=null,e))window.clearTimeout(i)}}),(0,l.jsx)(c.Provider,{value:h,children:e})}).displayName||(r.displayName="AliveTestProvider")}catch{}function x(e,i){let t=(0,n.A)(),r=(0,s.useContext)(c);(0,s.useEffect)(()=>{let s=()=>{},n=!1;return async function(){if("function"==typeof r){let t=await r(e,i);t&&(s=t.unsubscribe);return}try{let r=await (0,a.H)();if(n)return;let l=(0,o.$)(r,e,i);l?.unsubscribe&&(t()?s=l.unsubscribe:l.unsubscribe())}catch(e){console.error(e)}}(),()=>{n=!0,s()}},[e,i,t,r])}},9501:(e,i,t)=>{t.d(i,{B:()=>a});var r=t(67726),s=t(97156),n=t(96540);function a(e,i){if(!s.KJ)return[r.l,r.l,r.l];let t=(0,n.useMemo)(()=>new IntersectionObserver(e,i),[e,i]);return(0,n.useEffect)(()=>()=>t.disconnect(),[t]),[(0,n.useCallback)(e=>t.observe(e),[t]),(0,n.useCallback)(e=>t.unobserve(e),[t]),(0,n.useCallback)(()=>t.disconnect(),[t])]}},95068:(e,i,t)=>{t.d(i,{a:()=>a});var r=t(96540),s=t(9501);let n={position:"sticky",top:"-1px",zIndex:11,transition:"all 0.2s ease-in-out",backgroundColor:"canvas.default"};function a(e){let[i,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),l={root:null,rootMargin:"0px",threshold:[0,1],...e},d=(0,r.useCallback)(e=>{let[i]=e;o(1>(i?.intersectionRatio||0)),t((i?.rootBounds?.height??0)>0)},[o]),[c,u]=(0,s.B)(d,l);return{isSticky:a,hasRoots:i,stickyStyles:n,observe:c,unobserve:u}}},7148:(e,i,t)=>{t.d(i,{P:()=>a});var r=t(74848),s=t(75177);let n={reason:"readonly-comment-box-module__reason--CzzUh"};function a({reason:e,icon:i,...t}){return(0,r.jsx)(s.A,{className:"blankslate",sx:{border:"1px solid",borderColor:"neutral.muted",borderRadius:2,backgroundColor:"canvas.default",boxShadow:"shadow.small"},...t,children:(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"fg.muted"},children:[i&&(0,r.jsx)(i,{size:24}),(0,r.jsx)("div",{className:n.reason,children:e})]})})}try{a.displayName||(a.displayName="ReadonlyCommentBox")}catch{}},29004:(e,i,t)=>{t.d(i,{X:()=>a});var r=t(74848),s=t(75177),n=t(96540);function a({children:e,onObserve:i,onUnobserve:t,...a}){let o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(o.current){let e=o.current;return i?.(e),()=>t?.(e)}},[o,i,t]),(0,r.jsx)(s.A,{...a,ref:o,children:e})}try{a.displayName||(a.displayName="ObservableBox")}catch{}}}]);
//# sourceMappingURL=ui_packages_commenting_hooks_use-markdown-body_ts-ui_packages_commenting_utils_blocked-commen-6e6dca-a1cac6c43407.js.map